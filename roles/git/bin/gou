#!/usr/bin/env zsh


open_git_url() {
  local url=$(git config -l | grep remote.origin.url | cut -d= -f2)

  if [[ ! -n $url ]]; then
      echo "Error! git remote.origin.url not found"
      return 1
  fi

  if [[ -n $(echo $url | grep 'http') ]]; then
    open "$url"
  elif [[ -n $(echo $url | grep 'ssh') ]]; then
    url=$(echo "$url" | sed "s/ssh:/https:/" | sed "s/git@//")
    open "$url"
  elif [[ -n $(echo $url | grep 'git') ]]; then
    url=$(echo "$url" | sed "s/:/\//" | sed "s/git@/https:\/\//")
    open "$url"
  else
    echo "Error! Unexpected form: $url" 
    return 1
  fi
}


open_git_url

